@using BazaarCompanionWeb.Dtos
@using BazaarCompanionWeb.Components.Pages.Components
@using System.Globalization

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3">
    <!-- Total Market Cap -->
    <div class="group relative overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/40 px-3 py-2.5 shadow-md backdrop-blur-md transition-all duration-300 hover:border-slate-600/50 hover:bg-slate-800/60">
        <div class="flex flex-col">
            <p class="text-[10px] font-semibold uppercase tracking-wider text-slate-500 mb-1">Market Cap</p>
            <p class="text-lg font-bold tracking-tight text-slate-200">
                @(Metrics.TotalMarketCapitalization.ToString("N0", CultureInfo.InvariantCulture))
            </p>
            <p class="text-[10px] text-slate-600 font-mono mt-0.5">Total value</p>
        </div>
    </div>

    <!-- Average Spread -->
    <div class="group relative overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/40 px-3 py-2.5 shadow-md backdrop-blur-md transition-all duration-300 hover:border-slate-600/50 hover:bg-slate-800/60">
        <div class="flex flex-col">
            <p class="text-[10px] font-semibold uppercase tracking-wider text-slate-500 mb-1">Avg Spread</p>
            <p class="text-lg font-bold tracking-tight text-slate-200">
                @(Metrics.AverageSpread.ToString("P2", CultureInfo.InvariantCulture))
            </p>
            <p class="text-[10px] text-slate-600 font-mono mt-0.5">Across all products</p>
        </div>
    </div>

    <!-- Volatility Index -->
    <div class="group relative overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/40 px-3 py-2.5 shadow-md backdrop-blur-md transition-all duration-300 hover:border-slate-600/50 hover:bg-slate-800/60">
        <div class="flex flex-col">
            <p class="text-[10px] font-semibold uppercase tracking-wider text-slate-500 mb-1">Volatility</p>
            <p class="text-lg font-bold tracking-tight" style="@($"color: {(Metrics.MarketManipulationIndex > 10 ? "#EF4444" : Metrics.MarketManipulationIndex > 5 ? "#F97316" : "#78F86A")}")">
                @(Metrics.MarketManipulationIndex.ToString("F1", CultureInfo.InvariantCulture))%
            </p>
            <p class="text-[10px] text-slate-600 font-mono mt-0.5">Unusual price moves</p>
        </div>
    </div>

    <!-- Active Products -->
    <div class="group relative overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/40 px-3 py-2.5 shadow-md backdrop-blur-md transition-all duration-300 hover:border-slate-600/50 hover:bg-slate-800/60">
        <div class="flex flex-col">
            <p class="text-[10px] font-semibold uppercase tracking-wider text-slate-500 mb-1">Active Products</p>
            <p class="text-lg font-bold tracking-tight text-slate-200">
                @Metrics.ActiveProductsCount
            </p>
            <p class="text-[10px] text-slate-600 font-mono mt-0.5">With orders</p>
        </div>
    </div>

    <!-- Liquidity Score -->
    <div class="group relative overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/40 px-3 py-2.5 shadow-md backdrop-blur-md transition-all duration-300 hover:border-slate-600/50 hover:bg-slate-800/60">
        <div class="flex flex-col">
            <p class="text-[10px] font-semibold uppercase tracking-wider text-slate-500 mb-1">Liquidity</p>
            <p class="text-lg font-bold tracking-tight" style="@($"color: {(Metrics.MarketHealthScore >= 70 ? "#78F86A" : Metrics.MarketHealthScore >= 50 ? "#F9AD35" : "#EF4444")}")">
                @(Metrics.MarketHealthScore.ToString("F0", CultureInfo.InvariantCulture))
            </p>
            <p class="text-[10px] text-slate-600 font-mono mt-0.5">Spread + volume score</p>
        </div>
    </div>

    <!-- Volume 24h -->
    <div class="group relative overflow-hidden rounded-xl border border-slate-700/50 bg-slate-800/40 px-3 py-2.5 shadow-md backdrop-blur-md transition-all duration-300 hover:border-slate-600/50 hover:bg-slate-800/60">
        <div class="flex flex-col">
            <p class="text-[10px] font-semibold uppercase tracking-wider text-slate-500 mb-1">24h Volume</p>
            <p class="text-lg font-bold tracking-tight text-slate-200">
                @(Metrics.VolumeTrends.Volume24h.ToString("N0", CultureInfo.InvariantCulture))
            </p>
            <p class="text-[10px] text-slate-600 font-mono mt-0.5">Total volume</p>
        </div>
    </div>
</div>

@code {
    [Parameter] public required MarketMetrics Metrics { get; set; }
}
